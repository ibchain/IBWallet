(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t){},311:function(e,t,n){e.exports=n(650)},316:function(e,t,n){},650:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),s=n(32),i=n.n(s),c=(n(316),n(20)),l=n(22),u=n(26),d=n(24),p=n(27),h=n(25),m=n(243),g=n(656),f=n(90),E=n(244),y=n(47),b=n(45);!function(e){e.SWITCH_USER="SWITCH_USER",e.SWITCH_ADDRESS="SWITCH_ADDRESS",e.UPDATE_PROFILE="UPDATE_PROFILE",e.DELETE_PROFILE="DELETE_PROFILE",e.UPDATE_PAY_CODE="UPDATE_PAY_CODE",e.UPDATE_ASSET="UPDATE_ASSET",e.UPDATE_PAPER_INFO="UPDATE_PAPER_INFO"}(a||(a={}));var v=function(e){return{type:a.SWITCH_USER,user:e}},C=function(){return{type:a.DELETE_PROFILE}},A=function(e){return{type:a.SWITCH_ADDRESS,address:e}},O=function(e){return{type:a.UPDATE_ASSET,qty:e}},I=function(e){return{type:a.UPDATE_PAY_CODE,code:e}},P=function(e){return Object(b.a)({type:a.UPDATE_PAPER_INFO},e)},k=n(21)("STORE"),S={isLoggedIn:!1,isLogout:!1};var j={address:"",qty:0,code:""};var B=Object(y.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;k("state",e,t);var n=Object.assign({},e,{isLogout:!1});switch(t.type){case a.SWITCH_USER:n.user=t.user;break;case a.SWITCH_ADDRESS:n.address=t.address;break;case a.UPDATE_PAY_CODE:n.paycode=t.code;break;case a.DELETE_PROFILE:return{isLoggedIn:!1,isLogout:!0};default:return e}return n.isLoggedIn=!!n.user&&!!n.address,k("new state",n),n},asset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ibcoin:-1},t=arguments.length>1?arguments[1]:void 0;k("asset state",e);var n=Object.assign({},e);switch(t.type){case a.UPDATE_ASSET:n.ibcoin=t.qty;break;case a.DELETE_PROFILE:return{ibcoin:-1};default:return e}return n},coupon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;k("coupon state",e),k("coupon action",t);var n=Object.assign({},e);switch(t.type){case a.UPDATE_PAPER_INFO:var o=t.address,r=t.code,s=t.qty;n.address=o,n.code=r,n.qty=s;break;default:return e}return k("coupon new state",n),n}}),x=n(235),w=Object(y.createStore)(B,Object(x.composeWithDevTools)()),D=n(41),R=["","","/IBWallet","","/IBWallet/my-app/build"][["localhost:3000","localhost:8080","caldia-apps.github.io","d2otoqn9rs8n0r.cloudfront.net","ibchain.github.io"].indexOf(window.location.hostname)],q=Object(D.a)({basename:R}),T=n(3),_=n(657),L=n(33),U=n(58),M=n.n(U),N=n(88),W=n.n(N),F=n(56),H=n.n(F),G=Object(L.withStyles)({root:{flexGrow:1},grow:{flexGrow:1}})(function(e){var t=e.classes;return o.createElement("div",{className:t.root},o.createElement(M.a,{position:"static"},o.createElement(W.a,null,o.createElement(H.a,{variant:"h6",color:"inherit"},"IB Wallet"))))}),Q=n(236),V=n.n(Q),K=n(238),Y=n.n(K),J=n(237),z=n.n(J),$=n(652),X=n(21)("BottomAppBar"),Z=["/pay","/transfer","/account"],ee=Object($.a)(Object(L.withStyles)(function(e){return{appBar:{top:"auto",bottom:0}}})(function(e){var t=e.classes,n=Z.indexOf(e.location.pathname);return X("page no ={ ".concat(n," }")),o.createElement(o.Fragment,null,o.createElement(M.a,{position:"fixed",color:"primary",className:t.appBar},o.createElement(T.p,{value:n,onChange:function(t,n){e.history.push(Z[n])},variant:"fullWidth",scrollButtons:"off"},o.createElement(T.k,{icon:o.createElement(V.a,null)}),o.createElement(T.k,{icon:o.createElement(z.a,null)}),o.createElement(T.k,{icon:o.createElement(Y.a,null)}))))})),te=Object(L.withStyles)(function(e){return{nomatch:{textAlign:"center",margin:2*e.spacing.unit,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}}})(function(e){var t=e.classes;return o.createElement(T.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(T.h,{item:!0,xs:12},o.createElement(T.i,{className:t.nomatch},o.createElement(T.r,{variant:"body1",color:"inherit"},"\u6307\u5b9a\u3055\u308c\u305f\u30da\u30fc\u30b8\u306f\u898b\u3064\u304b\u308a\u307e\u305b\u3093"))))}),ne=n(21)("MyAsset:log");ne.log=console.log.bind(console);var ae=Object(h.b)(function(e){return ne("mapState",e),{asset:e.asset}})(function(e){ne("render",e);var t=e.asset;if(t.ibcoin<0)return o.createElement("div",{style:{display:"inline"}},"\u66f4\u65b0\u4e2d");var n=t.ibcoin;return o.createElement("div",{style:{display:"inline"}},n)}),oe=function(e){var t=e.address;return o.createElement(T.l,null,o.createElement(T.m,null,o.createElement(T.o,null,o.createElement(T.n,{component:"th",scope:"row"},"Address"),o.createElement(T.n,{align:"right"},t)),o.createElement(T.o,null,o.createElement(T.n,{component:"th",scope:"row"},"Asset"),o.createElement(T.n,{align:"right"},o.createElement(ae,null)))))},re=n(460),se=n(21)("[PAGE]{/pay}"),ie=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props.user,n=t.address,a=t.paycode,r="";n&&(r=n.substr(0,Math.min(n.length,10))+".....");var s=window.location.href.replace("/pay","")+(a?"/claim/".concat(a,"/"):n?"/paper/".concat(n,"/"):"/login");return se("QR",s),o.createElement(T.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(T.h,{item:!0,xs:12},o.createElement(oe,{address:r})),o.createElement(T.h,{item:!0,xs:12},o.createElement(ce,{classes:e,code:s,title:"\u652f\u6255\u3044\u30b3\u30fc\u30c9"})))}}]),t}(o.Component),ce=function(e){var t=e.classes;return o.createElement(T.i,{className:t.qrPaper},o.createElement(T.r,{variant:"body1",color:"inherit"},e.title),o.createElement(re,{value:e.code,className:t.qr}))},le=Object(L.withStyles)(function(e){return{qrPaper:{textAlign:"center",margin:2*e.spacing.unit,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit},qr:{display:"block",marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit,marginLeft:"auto",marginRight:"auto"}}})(Object(h.b)(function(e){return{user:e.user}})(ie)),ue=n(653),de=n(140),pe=n.n(de),he=n(241),me=n(35),ge=n(93),fe=n(14),Ee=n.n(fe),ye=n(21)("[getAddress]");var be=n(138),ve=n(21)("[getBalance]");var Ce=n(21)("[getPaycode]");var Ae=n(21)("[getPaycode]");var Oe=n(21)("[paperBalance]");var Ie=n(21)("[paperBalance]");var Pe={getAddress:function(){return new Promise(function(e,t){ye("\u30a2\u30c9\u30ec\u30b9\u53d6\u5f97\u306eAPI\u3092\u547c\u3073\u51fa\u3057\u307e\u3059");var n={headers:{},response:!1};fe.API.get("IBCoin_User","/address",n).then(function(t){ye("API.get","IBCoin_User","/address",n,t);var a=t["body-json"];a&&e(a)}).catch(function(e){ye("[ERR] API.get","IBCoin_User","/address",n,e),t(e)})})},getBalance:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ibcoin";return new Promise(function(n,a){var o="/assets?address="+e,r={headers:{},response:!1};fe.API.get("IBCoin_User",o,r).then(function(e){ve("API.get","IBCoin_User",o,r,e);var a=e["body-json"];return Object(be.isArray)(a)?a.forEach(function(e){if(ve(e),e.name===t)return n(e.qty)}):ve("body json is not array",a),n(0)}).catch(function(e){return ve("[ERR] API.get","IBCoin_User",o,r,e),n(0)})})},sendAsset:function(e){return new Promise(function(t,n){Ae("sendAsset",e);var a={headers:{},response:!1,body:{to:e.to,qty:e.qty,assetName:e.assetName}};fe.API.post("IBCoin_User","/assets",a).then(function(o){Ae("API.post","IBCoin_User","/assets",a),Ae("API.post > response =",o);var r=o;return r?t({to:e.to,qty:e.qty,resId:r}):n(new Error("UNKNOWN ERROR"))}).catch(function(e){return Ae("[ERR] API.put","IBCoin_User","/assets",a,e),n(e)})})}},ke={getPaycode:function(){return new Promise(function(e,t){Ce("getPaycode()");var n={headers:{},response:!1,body:{getCode:!0}};fe.API.post("IBCoin_User","/paper",n).then(function(e){return Ce("API.post","IBCoin_User","/paper",n),Ce("API.post > response =",e),e}).then(function(t){Ce("res",t),e(t.code)}).catch(function(e){Ce("[ERR] API.put","IBCoin_User","/paper",n,e),Ce(e,e.stack),t(e)})})}},Se={paperBalance:function(e){return new Promise(function(t,n){Oe("paperBalance",e);var a={headers:{paper_code:e},response:!1,body:{}};fe.API.get("IBCoin_User","/paper",a).then(function(e){return Oe("API.get","IBCoin_User","/paper",a),Oe("API.get > response =",e),e}).then(function(n){Oe("res",n);var a=n.address,o=n.qty;t({code:e,address:a,qty:o})}).catch(function(e){Oe("[ERR] API.get","IBCoin_User","/paper",a,e),Oe(e,e.stack),n(e)})})},claimPaperAsset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(n,a){Ie("claimPaperAsset",e);var o={headers:{},response:!1,body:{code:e,qty:t}};fe.API.post("IBCoin_User","/paper",o).then(function(e){return Ie("API.post","IBCoin_User","/paper",o),Ie("API.post > response =",e),e}).then(function(e){Ie("res",e),n(e)}).catch(function(e){Ie("[ERR] API.put","IBCoin_User","/paper",o,e),Ie(e,e.stack),a(e)})})}},je=n(21),Be=je("IBWallet[INFO]"),xe=je("IBWallet[ERR]"),we=function e(t){var n=this;Object(c.a)(this,e),this.dispatch=void 0,this.getMyAddress=function(){return Pe.getAddress().then(function(e){return n.getMyAddressSuccess(e)}).catch(function(e){return n.getMyAddressError(e)})},this.getMyAddressSuccess=function(e){Be("get address success",e),n.dispatch(A(e)),n.updateBalance(e)},this.getMyAddressError=function(e){xe("get address error",e),n.dispatch(A(void 0))},this.sendAsset=function(e){fe.Hub.dispatch("sendAsset",{event:"start",data:e},"IBWallet"),Pe.sendAsset(e).then(function(t){return n.sendAssetSuccess(e,t)}).catch(function(t){n.sendAssetError(t),n.updateBalance(e.fromAddress)})},this.sendAssetSuccess=function(e,t){Be("sendAssetSuccess",e,t);var a=t.resId;a&&a.errorMessage?fe.Hub.dispatch("sendAsset",{event:"error",errorMessage:a.errorMessage},"IBWallet"):fe.Hub.dispatch("sendAsset",{event:"success",data:{params:e,value:t}},"IBWallet"),n.updateBalance(e.fromAddress)},this.sendAssetError=function(e){fe.Hub.dispatch("sendAsset",{event:"error",errorMessage:e},"IBWallet"),xe(e)},this.updateBalance=function(e){Pe.getBalance(e).then(n.updateBalanceSuccess).catch(n.updateBalanceError)},this.updateBalanceSuccess=function(e){Be("update balance success",e),n.dispatch(O(e))},this.updateBalanceError=function(e){xe("update balance  ERR",e),n.dispatch(O(0))},this.dispatch=t},De=n(21),Re=De("IBPay[INFO]"),qe=De("IBPay[ERR]"),Te=function(){function e(t){Object(c.a)(this,e),this.dispatch=void 0,this.dispatch=t}return Object(l.a)(e,[{key:"updatePaycode",value:function(){var e=this;return ke.getPaycode().then(function(t){return e.updatePaycodeSuccess(t)}).catch(function(t){return e.updatePaycodeError(t)})}},{key:"updatePaycodeSuccess",value:function(e){return Re("update PayCode success",e),this.dispatch(I(e)),e}},{key:"updatePaycodeError",value:function(e){return qe("update PayCode error",e),this.dispatch(I("")),""}}]),e}(),_e=n(21)("helpers/localStorage");_e.log=console.log.bind(console);var Le="helpers/KEY_HAVE_LOGGED_IN";function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(localStorage&&localStorage.getItem){_e("getItem()",e);var n=localStorage.getItem(e);if(n)return _e("getItem() => ",n),n}else _e("ERR: localStorage is unabailable");return _e("getItem() defaultValue => ",t),t}function Me(e){localStorage&&localStorage.getItem?(_e("remove()",e),localStorage.removeItem(e)):_e("ERR: localStorage is unabailable")}var Ne=new fe.Logger("AmplifyBridge"),We=function e(t){var n=this;Object(c.a)(this,e),this.store=void 0,this.checkUser=function(){fe.Auth.currentAuthenticatedUser().then(function(e){return n.checkUserSuccess(e)}).catch(function(e){return n.checkUserError(e)})},this.checkUserSuccess=function(e){Ne.info("check user success",e),n.loadUserInfo(e)},this.checkUserError=function(e){Ne.info("check user error",e),n.store.dispatch(C())},this.loadUserInfo=function(e){fe.Auth.currentUserInfo().then(function(t){return n.loadUserInfoSuccess(e,t)}).catch(function(t){return n.loadUserInfoUserError(e,t)})},this.loadUserInfoSuccess=function(e,t){Ne.info("load user info success",e,t),Object.assign(e,t),n.store.dispatch(v(e)),n.updateAddress()},this.loadUserInfoUserError=function(e,t){throw Ne.error("load user info success",e,t),new Error("Method not implemented.")},this.updateAddress=function(){var e=n.store.getState();e.user&&!e.user.address&&(Ne.info("\u30a2\u30c9\u30ec\u30b9\u3092\u66f4\u65b0\u3057\u307e\u3059\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb"),new we(n.store.dispatch).getMyAddress().then(function(){return n.updatePaycode()}))},this.updatePaycode=function(){Ne.info("\u652f\u6255\u3044\u30b3\u30fc\u30c9\u3092\u66f4\u65b0\u3057\u307e\u3059\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb"),new Te(n.store.dispatch).updatePaycode().then(function(e){return Ne.info("IBPay.updatePaycode result > ",e)})},this.logout=function(){Me(Le),fe.Auth.signOut().then(n.logoutSuccess).catch(n.logoutError)},this.logoutSuccess=function(e){Ne.info("\u30ed\u30b0\u30a2\u30a6\u30c8",e),n.store.dispatch(C())},this.logoutError=function(e){Ne.error("\u30ed\u30b0\u30a2\u30a6\u30c8\u30a8\u30e9\u30fc",e),n.store.dispatch(C())},this.store=t},Fe=n(21)("MyGoogleLogin"),He=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).logout=function(){Fe("logout: ")},n.loading=function(){Fe("loading: ")},n.onsuccess=n.onsuccess.bind(Object(me.a)(n)),n.onfailure=n.onfailure.bind(Object(me.a)(n)),n.loading=n.loading.bind(Object(me.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Fe("componentDidMount")}},{key:"componentDidCatch",value:function(e,t){Fe("componentDidCatch: ",e,t)}},{key:"onsuccess",value:function(){var e=Object(he.a)(pe.a.mark(function e(t){var n,a,o,r,s,i;return pe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Fe("onsuccess: ",t),n=t.getAuthResponse(),a=n.id_token,o=n.expires_at,r=t.getBasicProfile(),s={email:r.getEmail(),name:r.getName()},e.next=6,fe.Auth.federatedSignIn("google",{token:a,expires_at:o},s);case 6:i=e.sent,Fe("credentials",i),new We(w).checkUser();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"onfailure",value:function(e){Fe("onfailure: ",e),e&&e.error&&e.error}},{key:"render",value:function(){return o.createElement(ge.GoogleLogin,{clientId:"899691769798-mknl4rtaosbgojomvs5u82k36ut4qcd2.apps.googleusercontent.com",buttonText:"\u65b0\u898f\u767b\u9332\u3001\u30ed\u30b0\u30a4\u30f3",scope:"",onSuccess:this.onsuccess,onFailure:this.onfailure,onRequest:this.loading,isSignedIn:!0})}}]),t}(o.Component),Ge=Object(h.b)(function(e){return Fe("mapState",e),{}},function(e){return Fe("mapDispatch",e),{}})(He),Qe=n(21)("[PAGE]{/login}"),Ve=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(this.props.user.isLoggedIn)return o.createElement(ue.a,{to:{pathname:"/pay"}});var e=this.props.classes;return o.createElement(T.i,{className:e.root,elevation:1},o.createElement(T.r,{variant:"h5",component:"h3",style:{paddingBottom:"20px"}},"\u3088\u3046\u3053\u305d IB Wallet \u3078\uff01\uff01"),o.createElement(Ge,null))}}]),t}(o.Component),Ke=Object(h.b)(function(e){return Qe("mapState",e),{user:e.user}})(Object(L.withStyles)(function(e){return{root:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",marginTop:4*e.spacing.unit,marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit})}})(Ve)),Ye=n(639),Je=n(21)("[PAGE]{/account}"),ze=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOnSuccessLogout=function(){new We(w).logout()},n.openLogoutDialog=function(e){n.setState({logoutDialogOpen:e})},n.handleClickLogout=function(){n.openLogoutDialog(!0)},n.handleLogoutClose=function(){n.openLogoutDialog(!1)},n.openCopyDialog=function(e,t){n.setState({copyMessage:t,copyDiaglogOpen:e})},n.handleClose=function(){n.openCopyDialog(!1)},n.onAfterCopy=function(){n.openCopyDialog(!0,"Address \u3092\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f")},n.onErrorCopy=function(){n.openCopyDialog(!0,"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u306e\u30b3\u30d4\u30fc\u304c\u5931\u6557\u3057\u307e\u3057\u305f")},n.state={copyDiaglogOpen:!1,logoutDialogOpen:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){Je("render");var e=this.props,t=e.user,n=e.classes,a=t.address;return o.createElement(T.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch",style:{padding:"15px 15px 0px 15px"}},o.createElement(et,{address:a,classes:n,onAfterCopy:this.onAfterCopy,onErrorCopy:this.onErrorCopy}),o.createElement(tt,{classes:n,onClick:this.handleClickLogout}),o.createElement(Ze,{copyDiaglogOpen:this.state.copyDiaglogOpen,copyMessage:this.state.copyMessage,handleClose:this.handleClose}),o.createElement(Xe,{logoutDialogOpen:this.state.logoutDialogOpen,handleLogoutClose:this.handleLogoutClose,onSuccessLogout:this.handleOnSuccessLogout}))}}]),t}(o.Component),$e=Object(h.b)(function(e){return Je("mapState",e),{user:e.user}},function(e){return{}})(Object(L.withStyles)(function(e){return{accountroot:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),button:{margin:e.spacing.unit},mypaper:{margin:e.spacing.unit}}})(ze)),Xe=function(e){var t=e.logoutDialogOpen,n=e.handleLogoutClose,a=e.onSuccessLogout;return o.createElement(T.c,{open:t,TransitionComponent:nt,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(T.g,{id:"alert-dialog-slide-title"},"\u30ed\u30b0\u30a2\u30a6\u30c8\u78ba\u8a8d"),o.createElement(T.e,null,o.createElement(T.f,{id:"alert-dialog-slide-description"},"\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u304b\uff1f")),o.createElement(T.d,null,o.createElement(T.a,{onClick:n,color:"primary"},"\u30ad\u30e3\u30f3\u30bb\u30eb"),o.createElement(ge.GoogleLogout,{onLogoutSuccess:a,render:function(e){return o.createElement(T.a,{variant:"contained",color:"secondary",onClick:e?e.onClick:function(){}},"\u30ed\u30b0\u30a2\u30a6\u30c8")}})))},Ze=function(e){var t=e.copyDiaglogOpen,n=e.handleClose,a=e.copyMessage;return o.createElement(T.c,{open:t,TransitionComponent:nt,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(T.g,{id:"alert-dialog-slide-title"},"Information"),o.createElement(T.e,null,o.createElement(T.f,{id:"alert-dialog-slide-description"},a)),o.createElement(T.d,null,o.createElement(T.a,{variant:"contained",onClick:n,color:"primary"},"OK")))},et=function(e){var t=e.address,n=e.classes,a=e.onAfterCopy,r=e.onErrorCopy;return o.createElement(T.h,{item:!0,xs:12,className:n.mypaper},o.createElement(T.i,{className:n.accountroot,elevation:1},o.createElement(T.r,{variant:"h5",component:"h3"},"Address"),o.createElement(T.r,{component:"p",style:{wordWrap:"break-word"}},t),o.createElement(Ye,{text:t,onAfterCopy:a,onErrorCopy:r},o.createElement(T.a,{variant:"outlined",className:n.button},"Copy"))))},tt=function(e){var t=e.classes,n=e.onClick;return o.createElement(T.h,{item:!0,xs:12,className:t.mypaper},o.createElement(T.i,{className:t.accountroot,elevation:1},o.createElement("div",{onClick:n},o.createElement(T.a,{variant:"contained",color:"secondary",className:t.button},"\u30ed\u30b0\u30a2\u30a6\u30c8"))))};function nt(e){return o.createElement(T.j,Object.assign({direction:"up"},e))}var at=n(242),ot=n(654),rt=n(21)("[PAGE]{PRIVATE}");rt.log=console.log.bind(console);var st=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).timer=void 0,n.state={timeout:!1},n.clearTimer=n.clearTimer.bind(Object(me.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;rt("componentDidMount");var t=function(){var e={loggedIn:!1,lastLoggedIn:new Date(0)},t=Ue(Le,JSON.stringify(e));return Object.assign(e,JSON.parse(t))}(),n=t.loggedIn,a=t.lastLoggedIn;rt("componentDidMount",n,a),this.timer=window.setTimeout(function(){e.props.isLoggedIn?rt("timeout: false"):(rt("timeout: true"),e.setState({timeout:!0}))},n?1e4:5e3)}},{key:"componentWillUnmount",value:function(){rt("componentWillUnmount"),this.clearTimer()}},{key:"clearTimer",value:function(){rt("clearTimeout"),this.timer&&(rt("clearTimeout !!this.timer === true"),window.clearTimeout(this.timer),this.timer=void 0)}},{key:"render",value:function(){var e=this;if(rt("render",this.props),this.props.isLogout)return this.clearTimer(),o.createElement(ue.a,{to:{pathname:"/login",state:{from:this.props.location}}});var t=this.props.isLoggedIn,n=this.state.timeout;if(!t&&!n){var a=this.props.classes;return o.createElement(T.i,{className:a.root,elevation:1},o.createElement(T.r,{variant:"h5",component:"h3",style:{paddingBottom:"20px"}},"\u3088\u3046\u3053\u305d IB Wallet \u3078\uff01\uff01"),o.createElement(T.r,{variant:"h5",component:"h3",style:{paddingBottom:"20px"}},"\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u4e2d\u3067\u3059\u3002"))}this.clearTimer();var r=this.props,s=r.component,i=Object(at.a)(r,["component"]);return o.createElement(ot.a,Object.assign({},i,{render:function(){return n?o.createElement(ue.a,{to:{pathname:"/login",state:{from:e.props.location}}}):o.createElement(s,e.props)}}))}}]),t}(o.Component),it=Object(h.b)(function(e,t){var n=e.user;return rt("mapState",n,t),{isLoggedIn:n.isLoggedIn,isLogout:n.isLogout}})(Object(L.withStyles)(function(e){return{root:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",marginTop:4*e.spacing.unit,marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit})}})(st)),ct=n(239),lt=n(21)("InputAsset");lt.log=console.log.bind(console);var ut=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickAdd=function(e){lt("handleClickAdd",e),n.setQty(n.state.qty+e)},n.handleClickSet=function(e){lt("handleClickSet",e),n.setQty(e)},n.setQty=function(e){n.setState({check:0<n.state.to.length&&0<e,qty:Math.max(0,e)})},n.handleClick=function(){if(lt("on click send button"),n.props.onClick){var e=n.state,t=e.to,a=e.qty;if(!t||0===t.length||!a||a<=0)return;n.props.onClick({address:t,qty:a})}},n.handleChangeAddress=function(e){var t=e.target.value;n.setState({check:t&&0<t.length&&0<n.state.qty,to:t}),n.onChangeEvent()},n.handleChangeQty=function(e){var t=1*e.target.value;isNaN(t)&&(t=1*n.state.qty),n.setState({check:!!n.state.to&&0<n.state.to.length&&0<t,qty:t}),n.onChangeEvent()},n.onChangeEvent=function(){n.props.onChange&&n.props.onChange()},n.state={check:!1,to:e.address?e.address:"",qty:Math.max(0,void 0!==e.qty?e.qty:0)},n.componentWillReceiveProps=n.componentWillReceiveProps.bind(Object(me.a)(n)),n.render=n.render.bind(Object(me.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){lt("componentWillReceiveProps",e);var t=e.address,n=e.qty;void 0===t||void 0===n||this.state.to===t&&this.state.qty===n?lt("componentWillReceiveProps \u5909\u66f4\u306a\u3057"):this.setState({to:t||"",qty:void 0!==n?n:0})}},{key:"render",value:function(){var e=this.props.classes;return o.createElement(T.h,{item:!0,xs:12},o.createElement(T.h,{item:!0,xs:12},o.createElement("form",{className:e.container,noValidate:!0,autoComplete:"off"},o.createElement(T.q,{required:!0,id:"outlined-required",label:"\u5b9b\u5148\u30a2\u30c9\u30ec\u30b9",className:e.textField,margin:"normal",variant:"outlined",fullWidth:!0,value:this.state.to,onChange:this.handleChangeAddress}),o.createElement(T.q,{id:"outlined-number",label:this.props.assetName,value:this.state.qty,onChange:this.handleChangeQty,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",fullWidth:!0}))),o.createElement(T.h,{item:!0,xs:12},o.createElement(T.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(dt,{values:[1e3,100,10,1],className:e.addButton,prefix:"",clickHandler:this.handleClickSet})),o.createElement(T.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(dt,{values:[1e3,100,10,1],className:e.addButton,prefix:"+",clickHandler:this.handleClickAdd})),o.createElement(T.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(dt,{values:[-1e3,-100,-10,-1],className:e.addButton,prefix:"",clickHandler:this.handleClickAdd})),o.createElement(T.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(T.a,{onClick:this.handleClick,disabled:!this.state.check||this.props.disabledButton,variant:"contained",color:"secondary"},"\u30b3\u30a4\u30f3\u9001\u4fe1\uff08\u78ba\u8a8d\u30c0\u30a4\u30a2\u30ed\u30b0\u8868\u793a\uff09"))))}}]),t}(o.Component),dt=function(e){var t=e.values,n=e.className,a=e.prefix,r=e.clickHandler,s=t.map(function(e,t){return o.createElement(pt,{value:e,text:"".concat(a).concat(e),onClick:function(){return r(e)},className:n,key:"add-".concat(t,"-").concat(e)})});return o.createElement(o.Fragment,null,s)},pt=function(e){var t=e.className,n=e.text,a=e.onClick,r=e.value;return o.createElement(T.a,{onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a(r)}),variant:"contained",color:"primary",className:t},n)},ht=Object(L.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},addButton:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}})(ut),mt=n(21)("PageTransfer");mt.log=console.log.bind(console);var gt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onHubCapsule=function(e){mt("onHubCapsule",e);var t=e.payload,a=t.event;"start"===a?mt("\u9001\u4fe1\u958b\u59cb"):"success"===a?n.onSuccessSendAsset(t.data):n.onFailureSendAsset(t.errorMessage)},n.handleClickConfirm=function(e){mt("handleClickConfirm",e);var t=e.address,a=e.qty,o=t+" \u306b "+a+" [ IBC ] \u3092\u9001\u4fe1\u3057\u307e\u3059",r={to:t,qty:a,assetName:"ibcoin",fromAddress:""+n.props.user.address};n.setState({disabledConfirm:!0,dialog:!0,dialogMessage:o,send:r,address:t,qty:a})},n.handleOnChangeAsset=function(){n.state.disabledConfirm&&(mt("handleOnChangeAsset"),n.setState({disabledConfirm:!1}))},n.closeResultDialog=function(){n.setState({resultDialog:!1})},n.handleCloseResultDialog=function(){n.closeResultDialog()},n.handleClose=function(){n.setState({disabledConfirm:!1,dialog:!1})},n.handleCancel=function(){mt("handleCancel ============= \u30ad\u30e3\u30f3\u30bb\u30eb\uff01\uff01"),n.setState({dialog:!1,dialogMessage:"",disabledConfirm:!1})},n.handleOk=function(){mt("handleOk ============= \u9001\u4fe1\uff01\uff01"),n.setState({dialog:!1,dialogMessage:"",disabledConfirm:!1}),n.state.send&&n.props.sendCoinAction(n.state.send)},n.onReceiveResult=function(e,t){if(t){var a=t.resId;a&&a.errorMessage?n.onFailureSendAsset(a.errorMessage):n.onSuccessSendAsset(t)}else n.onFailureSendAsset(e)},n.onSuccessSendAsset=function(e){n.showResultDialog("\u9001\u4fe1\u6210\u529f"),n.clearAsset()},n.onFailureSendAsset=function(e){n.showResultDialog("\u9001\u4fe1\u5931\u6557 [ ".concat(e," ]"))},n.showResultDialog=function(e){n.setState({resultDialog:!0,resultMessage:e})},n.clearAsset=function(){n.setState({address:" ",qty:0})},mt("constructor"),n.state={disabledConfirm:!1,dialog:!1,dialogMessage:"",resultDialog:!1,resultMessage:"",address:e.toAddress},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){fe.Hub.listen("sendAsset",this)}},{key:"componentWillUnmount",value:function(){fe.Hub.remove("sendAsset",this)}},{key:"render",value:function(){mt("render");var e=this.props.user.address,t="";e&&(t=e.substr(0,Math.min(e.length,10))+".....");var n=this.state.address?this.state.address:this.props.toAddress;return o.createElement(T.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(T.h,{item:!0,xs:12},o.createElement(oe,{address:t})),o.createElement(T.h,{item:!0,xs:12,style:{marginTop:"10px"}},o.createElement(T.r,{variant:"subtitle1",color:"inherit",style:{textAlign:"center"}},"\u30b3\u30a4\u30f3\u3092\u9001\u4fe1"),o.createElement(ht,{assetName:"IBC",onClick:this.handleClickConfirm,disabledButton:this.state.disabledConfirm,onChange:this.handleOnChangeAsset,address:n,qty:this.state.qty})),o.createElement(Et,{dialog:this.state.dialog,handleClose:this.handleClose,dialogMessage:this.state.dialogMessage,handleCancel:this.handleCancel,handleOk:this.handleOk}),o.createElement(yt,{resultDialog:this.state.resultDialog,handleCloseResultDialog:this.handleCloseResultDialog,resultMessage:this.state.resultMessage}))}}]),t}(o.Component),ft=function(e){return o.createElement(T.j,Object.assign({direction:"up"},e))},Et=function(e){var t=e.dialog,n=e.handleClose,a=e.dialogMessage,r=e.handleCancel,s=e.handleOk;return o.createElement(T.c,{open:t,TransitionComponent:ft,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(T.g,{id:"alert-dialog-slide-title"},"Information"),o.createElement(T.e,null,o.createElement(T.f,{id:"alert-dialog-slide-description"},a)),o.createElement(T.d,null,o.createElement(T.a,{onClick:r,color:"primary"},"Cancel"),o.createElement(T.a,{onClick:s,color:"secondary",variant:"contained"},"OK")))},yt=function(e){var t=e.resultDialog,n=e.handleCloseResultDialog,a=e.resultMessage;return o.createElement(T.c,{open:t,TransitionComponent:ft,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(T.g,{id:"alert-dialog-slide-title"},"Information"),o.createElement(T.e,null,o.createElement(T.f,{id:"alert-dialog-slide-description"},a)),o.createElement(T.d,null,o.createElement(T.a,{onClick:n,color:"primary"},"OK")))},bt=Object(ct.a)(Object(h.b)(function(e,t){return mt("mapState",e,t),{user:e.user,toAddress:t.location.state}},function(e){return{sendCoinAction:new we(e).sendAsset}})(gt)),vt=n(21),Ct=vt("IBCoupon[INFO]"),At=vt("IBCoupon[ERR]"),Ot=function e(t){var n=this;Object(c.a)(this,e),this.dispatch=void 0,this.getPaperBalance=function(e){Se.paperBalance(e).then(n.getPaperBalanceSuccess).catch(n.getPaperBalanceError)},this.getPaperBalanceSuccess=function(e){Ct(e),n.dispatch(P(e))},this.getPaperBalanceError=function(e){At(e),n.dispatch(P({address:"",code:"",qty:-1}))},this.claimPaperAsset=function(e,t){Se.claimPaperAsset(e,t).then(n.claimPaperAssetSuccess).catch(n.claimPaperAssetError)},this.claimPaperAssetSuccess=function(e){Ct(e)},this.claimPaperAssetError=function(e){At(e)},this.dispatch=t},It=n(21)("[PAGE]{/claim}"),Pt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickAdd=function(e){It("handleClickAdd",e),n.setQty(n.state.qty+e)},n.handleClickSet=function(e){It("handleClickSet",e),n.setQty(e)},n.setQty=function(e){n.setState({check:0<e,qty:Math.min(1e3,Math.max(0,e))})},n.handleClick=function(){It("on click claim button");var e=n.props.code,t=n.state.qty;!e||0===e.length||!t||t<=0||(It("onClick params",{code:e,qty:t}),n.props.paperAction(e,t))},n.handleChangeAddress=function(e){var t=e.target.value;n.setState({check:t&&0<t.length&&0<n.state.qty})},n.handleChangeQty=function(e){var t=1*e.target.value;isNaN(t)&&(t=1*n.state.qty),n.setState({check:0<t,qty:Math.min(1e3,Math.max(0,t))})},n.state={qty:0,check:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){It("componentDidMount()"),this.props.getPaperInfo(this.props.code)}},{key:"componentWillReceiveProps",value:function(){var e=this.props.coupon;this.setState({check:!!e.address&&0<this.state.qty})}},{key:"render",value:function(){It("render props:",this.props);var e=this.props.classes;return o.createElement(T.h,{item:!0,xs:12},o.createElement(T.h,{item:!0,xs:12},o.createElement("form",{className:e.container,noValidate:!0,autoComplete:"off"},o.createElement(T.q,{required:!0,id:"outlined-required",label:"\u8acb\u6c42\u5148\u30a2\u30c9\u30ec\u30b9",className:e.textField,margin:"normal",variant:"outlined",fullWidth:!0,value:this.props.coupon.address,onChange:this.handleChangeAddress}),o.createElement(T.q,{id:"outlined-number",label:"IBC",value:this.state.qty,onChange:this.handleChangeQty,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",fullWidth:!0}))),o.createElement(T.h,{item:!0,xs:12},o.createElement(T.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(T.a,{onClick:this.handleClick,disabled:!this.state.check,variant:"contained",color:"secondary"},"\u8acb\u6c42"))))}}]),t}(o.Component),kt=Object($.a)(Object(h.b)(function(e,t){return It("mapState",e,t),{code:t.match.params.code,coupon:e.coupon}},function(e){var t=new Ot(e);return{paperAction:t.claimPaperAsset,getPaperInfo:t.getPaperBalance}})(Object(L.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},addButton:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}})(Pt))),St=n(655),jt=function(e){var t=e.address,n=e.qty;return o.createElement(T.l,null,o.createElement(T.m,null,o.createElement(T.o,null,o.createElement(T.n,{component:"th",scope:"row"},"Address"),o.createElement(T.n,{align:"right"},t)),o.createElement(T.o,null,o.createElement(T.n,{component:"th",scope:"row"},"Asset"),o.createElement(T.n,{align:"right"},o.createElement("div",{style:{display:"inline"}},0+n)))))},Bt=n(21)("PapgePaper");Bt.log=console.log.bind(console);var xt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={address:"".concat(e.user.address),qty:0,buttonText:"\u30da\u30fc\u30d1\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089\u30b3\u30a4\u30f3\u3092\u53d6\u5f97\u3059\u308b",loading:!0,redirect:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Bt("componentDidMount()"),this.props.getPaperInfo(this.props.code)}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this;if(Bt("params:",this.props),!this.state.loading&&this.state.redirect)return o.createElement(E.a,{to:{pathname:"/pay"}});var t="";this.props.copuon&&this.props.copuon.address&&(t=this.props.copuon.address.substr(0,Math.min(this.state.address.length,10))+".....");var n=0;this.props.copuon&&this.props.copuon.qty&&(n=this.props.copuon.qty);var a=!(t&&0<t.length&&0<=n);return o.createElement(T.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(T.h,{item:!0,xs:12},o.createElement(jt,{address:t,qty:n})),o.createElement(T.h,{item:!0,xs:12,style:{textAlign:"center",margin:"20px"}},o.createElement(T.a,{onClick:function(){e.state.res?e.setState({redirect:!0}):e.props.paperAction(e.props.code,e.state.qty)},variant:"contained",color:"primary",disabled:a},this.state.buttonText),o.createElement("br",null),o.createElement(St.a,{to:"/share/".concat(this.props.copuon.address,"/")},o.createElement(T.a,{variant:"contained",disabled:a,style:{marginTop:"20px"}},"\u3053\u306e\u53e3\u5ea7\u306b\u30c1\u30e3\u30fc\u30b8\u3059\u308b"))))}}]),t}(o.Component),wt=Object(h.b)(function(e,t){return Bt("mapState",e,t),{user:e.user,code:t.match.params.code,copuon:e.coupon}},function(e){var t=new Ot(e);return{paperAction:t.claimPaperAsset,getPaperInfo:t.getPaperBalance}})(xt),Dt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:w},r.a.createElement(m.a,{history:q},r.a.createElement(T.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},r.a.createElement(T.b,null),r.a.createElement(_.a,null,r.a.createElement("div",{style:{height:"100%",paddingBottom:"60px"}},r.a.createElement(G,null),r.a.createElement(g.a,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return r.a.createElement(E.a,{to:{pathname:"/pay"}})}}),r.a.createElement(f.a,{path:"/login",component:Ke}),r.a.createElement(f.a,{path:"/paper/:code?",component:wt}),r.a.createElement(it,{path:"/account",component:$e}),r.a.createElement(it,{path:"/pay",component:le}),r.a.createElement(f.a,{path:"/claim/:code?",component:kt}),r.a.createElement(it,{path:"/transfer",component:bt}),r.a.createElement(f.a,{path:"/share/:address?",render:function(e){return r.a.createElement(E.a,{to:{pathname:"/transfer",state:e.match.params.address}})}}),r.a.createElement(f.a,{component:te})),r.a.createElement(ee,null))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Ge,null)))))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));if(window.location.hostname.indexOf("localhost")>=0){fe.Logger.LOG_LEVEL="DEBUG",console.log("hostname = ",window.location.hostname);console.log("debug: *"),localStorage.setItem("debug","*")}Ee.a.configure({aws_appsync_authenticationType:"OPENID_CONNECT",Auth:{identityPoolId:"ap-northeast-1:ef403614-ab79-48bf-b699-96430a108dc6",region:"ap-northeast-1",userPoolId:"ap-northeast-1_kxPu6h5rk",userPoolWebClientId:"14hcert5mg85d94j09e4608rof"},API:{endpoints:[{name:"IBCoin_User",endpoint:"https://dmaqop4vpl.execute-api.ap-northeast-1.amazonaws.com/test",region:"ap-northeast-1"}]}}),i.a.render(r.a.createElement(Dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[311,1,2]]]);
//# sourceMappingURL=main.839bbe62.chunk.js.map