(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t){},311:function(e,t,n){e.exports=n(650)},316:function(e,t,n){},650:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),s=n(32),i=n.n(s),c=(n(316),n(20)),l=n(22),u=n(26),d=n(24),p=n(27),h=n(25),m=n(243),g=n(656),f=n(90),E=n(244),y=n(47),b=n(45);!function(e){e.SWITCH_USER="SWITCH_USER",e.SWITCH_ADDRESS="SWITCH_ADDRESS",e.UPDATE_PROFILE="UPDATE_PROFILE",e.DELETE_PROFILE="DELETE_PROFILE",e.UPDATE_PAY_CODE="UPDATE_PAY_CODE",e.UPDATE_ASSET="UPDATE_ASSET",e.UPDATE_PAPER_INFO="UPDATE_PAPER_INFO"}(a||(a={}));var v=function(e){return{type:a.SWITCH_USER,user:e}},C=function(){return{type:a.DELETE_PROFILE}},A=function(e){return{type:a.SWITCH_ADDRESS,address:e}},O=function(e){return{type:a.UPDATE_ASSET,qty:e}},I=function(e){return{type:a.UPDATE_PAY_CODE,code:e}},P=function(e){return Object(b.a)({type:a.UPDATE_PAPER_INFO},e)},k=n(21)("STORE"),S={isLoggedIn:!1,isLogout:!1};var j={address:"",qty:0,code:""};var B=Object(y.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;k("state",e,t);var n=Object.assign({},e,{isLogout:!1});switch(t.type){case a.SWITCH_USER:n.user=t.user;break;case a.SWITCH_ADDRESS:n.address=t.address;break;case a.UPDATE_PAY_CODE:n.paycode=t.code;break;case a.DELETE_PROFILE:return{isLoggedIn:!1,isLogout:!0};default:return e}return n.isLoggedIn=!!n.user&&!!n.address,k("new state",n),n},asset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ibcoin:-1},t=arguments.length>1?arguments[1]:void 0;k("asset state",e);var n=Object.assign({},e);switch(t.type){case a.UPDATE_ASSET:n.ibcoin=t.qty;break;case a.DELETE_PROFILE:return{ibcoin:-1};default:return e}return n},coupon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;k("coupon state",e),k("coupon action",t);var n=Object.assign({},e);switch(t.type){case a.UPDATE_PAPER_INFO:var o=t.address,r=t.code,s=t.qty;n.address=o,n.code=r,n.qty=s;break;default:return e}return k("coupon new state",n),n}}),x=n(235),w=Object(y.createStore)(B,Object(x.composeWithDevTools)()),D=n(41),R=["localhost:3000","localhost:8080","caldia-apps.github.io","d2otoqn9rs8n0r.cloudfront.net","ibchain.github.io"].indexOf(window.location.hostname),q=["","","/IBWallet","","".concat("/IBWallet")][R],T=Object(D.a)({basename:q}),_=n(3),L=n(657),U=n(33),M=n(58),N=n.n(M),W=n(88),F=n.n(W),H=n(56),G=n.n(H),Q=Object(U.withStyles)({root:{flexGrow:1},grow:{flexGrow:1}})(function(e){var t=e.classes;return o.createElement("div",{className:t.root},o.createElement(N.a,{position:"static"},o.createElement(F.a,null,o.createElement(G.a,{variant:"h6",color:"inherit"},"IB Wallet"))))}),V=n(236),K=n.n(V),Y=n(238),J=n.n(Y),z=n(237),$=n.n(z),X=n(652),Z=n(21)("BottomAppBar"),ee=["/pay","/transfer","/account"],te=Object(X.a)(Object(U.withStyles)(function(e){return{appBar:{top:"auto",bottom:0}}})(function(e){var t=e.classes,n=ee.indexOf(e.location.pathname);return Z("page no ={ ".concat(n," }")),o.createElement(o.Fragment,null,o.createElement(N.a,{position:"fixed",color:"primary",className:t.appBar},o.createElement(_.p,{value:n,onChange:function(t,n){e.history.push(ee[n])},variant:"fullWidth",scrollButtons:"off"},o.createElement(_.k,{icon:o.createElement(K.a,null)}),o.createElement(_.k,{icon:o.createElement($.a,null)}),o.createElement(_.k,{icon:o.createElement(J.a,null)}))))})),ne=Object(U.withStyles)(function(e){return{nomatch:{textAlign:"center",margin:2*e.spacing.unit,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}}})(function(e){var t=e.classes;return o.createElement(_.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(_.h,{item:!0,xs:12},o.createElement(_.i,{className:t.nomatch},o.createElement(_.r,{variant:"body1",color:"inherit"},"\u6307\u5b9a\u3055\u308c\u305f\u30da\u30fc\u30b8\u306f\u898b\u3064\u304b\u308a\u307e\u305b\u3093"))))}),ae=n(21)("MyAsset:log");ae.log=console.log.bind(console);var oe=Object(h.b)(function(e){return ae("mapState",e),{asset:e.asset}})(function(e){ae("render",e);var t=e.asset;if(t.ibcoin<0)return o.createElement("div",{style:{display:"inline"}},"\u66f4\u65b0\u4e2d");var n=t.ibcoin;return o.createElement("div",{style:{display:"inline"}},n)}),re=function(e){var t=e.address;return o.createElement(_.l,null,o.createElement(_.m,null,o.createElement(_.o,null,o.createElement(_.n,{component:"th",scope:"row"},"Address"),o.createElement(_.n,{align:"right"},t)),o.createElement(_.o,null,o.createElement(_.n,{component:"th",scope:"row"},"Asset"),o.createElement(_.n,{align:"right"},o.createElement(oe,null)))))},se=n(460),ie=n(21)("[PAGE]{/pay}"),ce=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props.user,n=t.address,a=t.paycode,r="";n&&(r=n.substr(0,Math.min(n.length,10))+".....");var s=window.location.href.replace("/pay","")+(a?"/claim/".concat(a,"/"):n?"/paper/".concat(n,"/"):"/login");return ie("QR",s),o.createElement(_.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(_.h,{item:!0,xs:12},o.createElement(re,{address:r})),o.createElement(_.h,{item:!0,xs:12},o.createElement(le,{classes:e,code:s,title:"\u652f\u6255\u3044\u30b3\u30fc\u30c9"})))}}]),t}(o.Component),le=function(e){var t=e.classes;return o.createElement(_.i,{className:t.qrPaper},o.createElement(_.r,{variant:"body1",color:"inherit"},e.title),o.createElement(se,{value:e.code,className:t.qr}))},ue=Object(U.withStyles)(function(e){return{qrPaper:{textAlign:"center",margin:2*e.spacing.unit,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit},qr:{display:"block",marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit,marginLeft:"auto",marginRight:"auto"}}})(Object(h.b)(function(e){return{user:e.user}})(ce)),de=n(653),pe=n(140),he=n.n(pe),me=n(241),ge=n(35),fe=n(93),Ee=n(14),ye=n.n(Ee),be=n(21)("[getAddress]");var ve=n(138),Ce=n(21)("[getBalance]");var Ae=n(21)("[getPaycode]");var Oe=n(21)("[getPaycode]");var Ie=n(21)("[paperBalance]");var Pe=n(21)("[paperBalance]");var ke={getAddress:function(){return new Promise(function(e,t){be("\u30a2\u30c9\u30ec\u30b9\u53d6\u5f97\u306eAPI\u3092\u547c\u3073\u51fa\u3057\u307e\u3059");var n={headers:{},response:!1};Ee.API.get("IBCoin_User","/address",n).then(function(t){be("API.get","IBCoin_User","/address",n,t);var a=t["body-json"];a&&e(a)}).catch(function(e){be("[ERR] API.get","IBCoin_User","/address",n,e),t(e)})})},getBalance:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ibcoin";return new Promise(function(n,a){var o="/assets?address="+e,r={headers:{},response:!1};Ee.API.get("IBCoin_User",o,r).then(function(e){Ce("API.get","IBCoin_User",o,r,e);var a=e["body-json"];return Object(ve.isArray)(a)?a.forEach(function(e){if(Ce(e),e.name===t)return n(e.qty)}):Ce("body json is not array",a),n(0)}).catch(function(e){return Ce("[ERR] API.get","IBCoin_User",o,r,e),n(0)})})},sendAsset:function(e){return new Promise(function(t,n){Oe("sendAsset",e);var a={headers:{},response:!1,body:{to:e.to,qty:e.qty,assetName:e.assetName}};Ee.API.post("IBCoin_User","/assets",a).then(function(o){Oe("API.post","IBCoin_User","/assets",a),Oe("API.post > response =",o);var r=o;return r?t({to:e.to,qty:e.qty,resId:r}):n(new Error("UNKNOWN ERROR"))}).catch(function(e){return Oe("[ERR] API.put","IBCoin_User","/assets",a,e),n(e)})})}},Se={getPaycode:function(){return new Promise(function(e,t){Ae("getPaycode()");var n={headers:{},response:!1,body:{getCode:!0}};Ee.API.post("IBCoin_User","/paper",n).then(function(e){return Ae("API.post","IBCoin_User","/paper",n),Ae("API.post > response =",e),e}).then(function(t){Ae("res",t),e(t.code)}).catch(function(e){Ae("[ERR] API.put","IBCoin_User","/paper",n,e),Ae(e,e.stack),t(e)})})}},je={paperBalance:function(e){return new Promise(function(t,n){Ie("paperBalance",e);var a={headers:{paper_code:e},response:!1,body:{}};Ee.API.get("IBCoin_User","/paper",a).then(function(e){return Ie("API.get","IBCoin_User","/paper",a),Ie("API.get > response =",e),e}).then(function(n){Ie("res",n);var a=n.address,o=n.qty;t({code:e,address:a,qty:o})}).catch(function(e){Ie("[ERR] API.get","IBCoin_User","/paper",a,e),Ie(e,e.stack),n(e)})})},claimPaperAsset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(n,a){Pe("claimPaperAsset",e);var o={headers:{},response:!1,body:{code:e,qty:t}};Ee.API.post("IBCoin_User","/paper",o).then(function(e){return Pe("API.post","IBCoin_User","/paper",o),Pe("API.post > response =",e),e}).then(function(e){Pe("res",e),n(e)}).catch(function(e){Pe("[ERR] API.put","IBCoin_User","/paper",o,e),Pe(e,e.stack),a(e)})})}},Be=n(21),xe=Be("IBWallet[INFO]"),we=Be("IBWallet[ERR]"),De=function e(t){var n=this;Object(c.a)(this,e),this.dispatch=void 0,this.getMyAddress=function(){return ke.getAddress().then(function(e){return n.getMyAddressSuccess(e)}).catch(function(e){return n.getMyAddressError(e)})},this.getMyAddressSuccess=function(e){xe("get address success",e),n.dispatch(A(e)),n.updateBalance(e)},this.getMyAddressError=function(e){we("get address error",e),n.dispatch(A(void 0))},this.sendAsset=function(e){Ee.Hub.dispatch("sendAsset",{event:"start",data:e},"IBWallet"),ke.sendAsset(e).then(function(t){return n.sendAssetSuccess(e,t)}).catch(function(t){n.sendAssetError(t),n.updateBalance(e.fromAddress)})},this.sendAssetSuccess=function(e,t){xe("sendAssetSuccess",e,t);var a=t.resId;a&&a.errorMessage?Ee.Hub.dispatch("sendAsset",{event:"error",errorMessage:a.errorMessage},"IBWallet"):Ee.Hub.dispatch("sendAsset",{event:"success",data:{params:e,value:t}},"IBWallet"),n.updateBalance(e.fromAddress)},this.sendAssetError=function(e){Ee.Hub.dispatch("sendAsset",{event:"error",errorMessage:e},"IBWallet"),we(e)},this.updateBalance=function(e){ke.getBalance(e).then(n.updateBalanceSuccess).catch(n.updateBalanceError)},this.updateBalanceSuccess=function(e){xe("update balance success",e),n.dispatch(O(e))},this.updateBalanceError=function(e){we("update balance  ERR",e),n.dispatch(O(0))},this.dispatch=t},Re=n(21),qe=Re("IBPay[INFO]"),Te=Re("IBPay[ERR]"),_e=function(){function e(t){Object(c.a)(this,e),this.dispatch=void 0,this.dispatch=t}return Object(l.a)(e,[{key:"updatePaycode",value:function(){var e=this;return Se.getPaycode().then(function(t){return e.updatePaycodeSuccess(t)}).catch(function(t){return e.updatePaycodeError(t)})}},{key:"updatePaycodeSuccess",value:function(e){return qe("update PayCode success",e),this.dispatch(I(e)),e}},{key:"updatePaycodeError",value:function(e){return Te("update PayCode error",e),this.dispatch(I("")),""}}]),e}(),Le=n(21)("helpers/localStorage");Le.log=console.log.bind(console);var Ue="helpers/KEY_HAVE_LOGGED_IN";function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(localStorage&&localStorage.getItem){Le("getItem()",e);var n=localStorage.getItem(e);if(n)return Le("getItem() => ",n),n}else Le("ERR: localStorage is unabailable");return Le("getItem() defaultValue => ",t),t}function Ne(e){localStorage&&localStorage.getItem?(Le("remove()",e),localStorage.removeItem(e)):Le("ERR: localStorage is unabailable")}var We=new Ee.Logger("AmplifyBridge"),Fe=function e(t){var n=this;Object(c.a)(this,e),this.store=void 0,this.checkUser=function(){Ee.Auth.currentAuthenticatedUser().then(function(e){return n.checkUserSuccess(e)}).catch(function(e){return n.checkUserError(e)})},this.checkUserSuccess=function(e){We.info("check user success",e),n.loadUserInfo(e)},this.checkUserError=function(e){We.info("check user error",e),n.store.dispatch(C())},this.loadUserInfo=function(e){Ee.Auth.currentUserInfo().then(function(t){return n.loadUserInfoSuccess(e,t)}).catch(function(t){return n.loadUserInfoUserError(e,t)})},this.loadUserInfoSuccess=function(e,t){We.info("load user info success",e,t),Object.assign(e,t),n.store.dispatch(v(e)),n.updateAddress()},this.loadUserInfoUserError=function(e,t){throw We.error("load user info success",e,t),new Error("Method not implemented.")},this.updateAddress=function(){var e=n.store.getState();e.user&&!e.user.address&&(We.info("\u30a2\u30c9\u30ec\u30b9\u3092\u66f4\u65b0\u3057\u307e\u3059\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb"),new De(n.store.dispatch).getMyAddress().then(function(){return n.updatePaycode()}))},this.updatePaycode=function(){We.info("\u652f\u6255\u3044\u30b3\u30fc\u30c9\u3092\u66f4\u65b0\u3057\u307e\u3059\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb\u30fb"),new _e(n.store.dispatch).updatePaycode().then(function(e){return We.info("IBPay.updatePaycode result > ",e)})},this.logout=function(){Ne(Ue),Ee.Auth.signOut().then(n.logoutSuccess).catch(n.logoutError)},this.logoutSuccess=function(e){We.info("\u30ed\u30b0\u30a2\u30a6\u30c8",e),n.store.dispatch(C())},this.logoutError=function(e){We.error("\u30ed\u30b0\u30a2\u30a6\u30c8\u30a8\u30e9\u30fc",e),n.store.dispatch(C())},this.store=t},He=n(21)("MyGoogleLogin"),Ge=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).logout=function(){He("logout: ")},n.loading=function(){He("loading: ")},n.onsuccess=n.onsuccess.bind(Object(ge.a)(n)),n.onfailure=n.onfailure.bind(Object(ge.a)(n)),n.loading=n.loading.bind(Object(ge.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){He("componentDidMount")}},{key:"componentDidCatch",value:function(e,t){He("componentDidCatch: ",e,t)}},{key:"onsuccess",value:function(){var e=Object(me.a)(he.a.mark(function e(t){var n,a,o,r,s,i;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return He("onsuccess: ",t),n=t.getAuthResponse(),a=n.id_token,o=n.expires_at,r=t.getBasicProfile(),s={email:r.getEmail(),name:r.getName()},e.next=6,Ee.Auth.federatedSignIn("google",{token:a,expires_at:o},s);case 6:i=e.sent,He("credentials",i),new Fe(w).checkUser();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"onfailure",value:function(e){He("onfailure: ",e),e&&e.error&&e.error}},{key:"render",value:function(){return o.createElement(fe.GoogleLogin,{clientId:"899691769798-mknl4rtaosbgojomvs5u82k36ut4qcd2.apps.googleusercontent.com",buttonText:"\u65b0\u898f\u767b\u9332\u3001\u30ed\u30b0\u30a4\u30f3",scope:"",onSuccess:this.onsuccess,onFailure:this.onfailure,onRequest:this.loading,isSignedIn:!0})}}]),t}(o.Component),Qe=Object(h.b)(function(e){return He("mapState",e),{}},function(e){return He("mapDispatch",e),{}})(Ge),Ve=n(21)("[PAGE]{/login}"),Ke=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(this.props.user.isLoggedIn)return o.createElement(de.a,{to:{pathname:"/pay"}});var e=this.props.classes;return o.createElement(_.i,{className:e.root,elevation:1},o.createElement(_.r,{variant:"h5",component:"h3",style:{paddingBottom:"20px"}},"\u3088\u3046\u3053\u305d IB Wallet \u3078\uff01\uff01"),o.createElement(Qe,null))}}]),t}(o.Component),Ye=Object(h.b)(function(e){return Ve("mapState",e),{user:e.user}})(Object(U.withStyles)(function(e){return{root:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",marginTop:4*e.spacing.unit,marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit})}})(Ke)),Je=n(639),ze=n(21)("[PAGE]{/account}"),$e=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOnSuccessLogout=function(){new Fe(w).logout()},n.openLogoutDialog=function(e){n.setState({logoutDialogOpen:e})},n.handleClickLogout=function(){n.openLogoutDialog(!0)},n.handleLogoutClose=function(){n.openLogoutDialog(!1)},n.openCopyDialog=function(e,t){n.setState({copyMessage:t,copyDiaglogOpen:e})},n.handleClose=function(){n.openCopyDialog(!1)},n.onAfterCopy=function(){n.openCopyDialog(!0,"Address \u3092\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f")},n.onErrorCopy=function(){n.openCopyDialog(!0,"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u306e\u30b3\u30d4\u30fc\u304c\u5931\u6557\u3057\u307e\u3057\u305f")},n.state={copyDiaglogOpen:!1,logoutDialogOpen:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){ze("render");var e=this.props,t=e.user,n=e.classes,a=t.address;return o.createElement(_.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch",style:{padding:"15px 15px 0px 15px"}},o.createElement(tt,{address:a,classes:n,onAfterCopy:this.onAfterCopy,onErrorCopy:this.onErrorCopy}),o.createElement(nt,{classes:n,onClick:this.handleClickLogout}),o.createElement(et,{copyDiaglogOpen:this.state.copyDiaglogOpen,copyMessage:this.state.copyMessage,handleClose:this.handleClose}),o.createElement(Ze,{logoutDialogOpen:this.state.logoutDialogOpen,handleLogoutClose:this.handleLogoutClose,onSuccessLogout:this.handleOnSuccessLogout}))}}]),t}(o.Component),Xe=Object(h.b)(function(e){return ze("mapState",e),{user:e.user}},function(e){return{}})(Object(U.withStyles)(function(e){return{accountroot:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),button:{margin:e.spacing.unit},mypaper:{margin:e.spacing.unit}}})($e)),Ze=function(e){var t=e.logoutDialogOpen,n=e.handleLogoutClose,a=e.onSuccessLogout;return o.createElement(_.c,{open:t,TransitionComponent:at,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(_.g,{id:"alert-dialog-slide-title"},"\u30ed\u30b0\u30a2\u30a6\u30c8\u78ba\u8a8d"),o.createElement(_.e,null,o.createElement(_.f,{id:"alert-dialog-slide-description"},"\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u304b\uff1f")),o.createElement(_.d,null,o.createElement(_.a,{onClick:n,color:"primary"},"\u30ad\u30e3\u30f3\u30bb\u30eb"),o.createElement(fe.GoogleLogout,{onLogoutSuccess:a,render:function(e){return o.createElement(_.a,{variant:"contained",color:"secondary",onClick:e?e.onClick:function(){}},"\u30ed\u30b0\u30a2\u30a6\u30c8")}})))},et=function(e){var t=e.copyDiaglogOpen,n=e.handleClose,a=e.copyMessage;return o.createElement(_.c,{open:t,TransitionComponent:at,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(_.g,{id:"alert-dialog-slide-title"},"Information"),o.createElement(_.e,null,o.createElement(_.f,{id:"alert-dialog-slide-description"},a)),o.createElement(_.d,null,o.createElement(_.a,{variant:"contained",onClick:n,color:"primary"},"OK")))},tt=function(e){var t=e.address,n=e.classes,a=e.onAfterCopy,r=e.onErrorCopy;return o.createElement(_.h,{item:!0,xs:12,className:n.mypaper},o.createElement(_.i,{className:n.accountroot,elevation:1},o.createElement(_.r,{variant:"h5",component:"h3"},"Address"),o.createElement(_.r,{component:"p",style:{wordWrap:"break-word"}},t),o.createElement(Je,{text:t,onAfterCopy:a,onErrorCopy:r},o.createElement(_.a,{variant:"outlined",className:n.button},"Copy"))))},nt=function(e){var t=e.classes,n=e.onClick;return o.createElement(_.h,{item:!0,xs:12,className:t.mypaper},o.createElement(_.i,{className:t.accountroot,elevation:1},o.createElement("div",{onClick:n},o.createElement(_.a,{variant:"contained",color:"secondary",className:t.button},"\u30ed\u30b0\u30a2\u30a6\u30c8"))))};function at(e){return o.createElement(_.j,Object.assign({direction:"up"},e))}var ot=n(242),rt=n(654),st=n(21)("[PAGE]{PRIVATE}");st.log=console.log.bind(console);var it=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).timer=void 0,n.state={timeout:!1},n.clearTimer=n.clearTimer.bind(Object(ge.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;st("componentDidMount");var t=function(){var e={loggedIn:!1,lastLoggedIn:new Date(0)},t=Me(Ue,JSON.stringify(e));return Object.assign(e,JSON.parse(t))}(),n=t.loggedIn,a=t.lastLoggedIn;st("componentDidMount",n,a),this.timer=window.setTimeout(function(){e.props.isLoggedIn?st("timeout: false"):(st("timeout: true"),e.setState({timeout:!0}))},n?1e4:5e3)}},{key:"componentWillUnmount",value:function(){st("componentWillUnmount"),this.clearTimer()}},{key:"clearTimer",value:function(){st("clearTimeout"),this.timer&&(st("clearTimeout !!this.timer === true"),window.clearTimeout(this.timer),this.timer=void 0)}},{key:"render",value:function(){var e=this;if(st("render",this.props),this.props.isLogout)return this.clearTimer(),o.createElement(de.a,{to:{pathname:"/login",state:{from:this.props.location}}});var t=this.props.isLoggedIn,n=this.state.timeout;if(!t&&!n){var a=this.props.classes;return o.createElement(_.i,{className:a.root,elevation:1},o.createElement(_.r,{variant:"h5",component:"h3",style:{paddingBottom:"20px"}},"\u3088\u3046\u3053\u305d IB Wallet \u3078\uff01\uff01"),o.createElement(_.r,{variant:"h5",component:"h3",style:{paddingBottom:"20px"}},"\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u4e2d\u3067\u3059\u3002"))}this.clearTimer();var r=this.props,s=r.component,i=Object(ot.a)(r,["component"]);return o.createElement(rt.a,Object.assign({},i,{render:function(){return n?o.createElement(de.a,{to:{pathname:"/login",state:{from:e.props.location}}}):o.createElement(s,e.props)}}))}}]),t}(o.Component),ct=Object(h.b)(function(e,t){var n=e.user;return st("mapState",n,t),{isLoggedIn:n.isLoggedIn,isLogout:n.isLogout}})(Object(U.withStyles)(function(e){return{root:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",marginTop:4*e.spacing.unit,marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit})}})(it)),lt=n(239),ut=n(21)("InputAsset");ut.log=console.log.bind(console);var dt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickAdd=function(e){ut("handleClickAdd",e),n.setQty(n.state.qty+e)},n.handleClickSet=function(e){ut("handleClickSet",e),n.setQty(e)},n.setQty=function(e){n.setState({check:0<n.state.to.length&&0<e,qty:Math.max(0,e)})},n.handleClick=function(){if(ut("on click send button"),n.props.onClick){var e=n.state,t=e.to,a=e.qty;if(!t||0===t.length||!a||a<=0)return;n.props.onClick({address:t,qty:a})}},n.handleChangeAddress=function(e){var t=e.target.value;n.setState({check:t&&0<t.length&&0<n.state.qty,to:t}),n.onChangeEvent()},n.handleChangeQty=function(e){var t=1*e.target.value;isNaN(t)&&(t=1*n.state.qty),n.setState({check:!!n.state.to&&0<n.state.to.length&&0<t,qty:t}),n.onChangeEvent()},n.onChangeEvent=function(){n.props.onChange&&n.props.onChange()},n.state={check:!1,to:e.address?e.address:"",qty:Math.max(0,void 0!==e.qty?e.qty:0)},n.componentWillReceiveProps=n.componentWillReceiveProps.bind(Object(ge.a)(n)),n.render=n.render.bind(Object(ge.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){ut("componentWillReceiveProps",e);var t=e.address,n=e.qty;void 0===t||void 0===n||this.state.to===t&&this.state.qty===n?ut("componentWillReceiveProps \u5909\u66f4\u306a\u3057"):this.setState({to:t||"",qty:void 0!==n?n:0})}},{key:"render",value:function(){var e=this.props.classes;return o.createElement(_.h,{item:!0,xs:12},o.createElement(_.h,{item:!0,xs:12},o.createElement("form",{className:e.container,noValidate:!0,autoComplete:"off"},o.createElement(_.q,{required:!0,id:"outlined-required",label:"\u5b9b\u5148\u30a2\u30c9\u30ec\u30b9",className:e.textField,margin:"normal",variant:"outlined",fullWidth:!0,value:this.state.to,onChange:this.handleChangeAddress}),o.createElement(_.q,{id:"outlined-number",label:this.props.assetName,value:this.state.qty,onChange:this.handleChangeQty,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",fullWidth:!0}))),o.createElement(_.h,{item:!0,xs:12},o.createElement(_.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(pt,{values:[1e3,100,10,1],className:e.addButton,prefix:"",clickHandler:this.handleClickSet})),o.createElement(_.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(pt,{values:[1e3,100,10,1],className:e.addButton,prefix:"+",clickHandler:this.handleClickAdd})),o.createElement(_.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(pt,{values:[-1e3,-100,-10,-1],className:e.addButton,prefix:"",clickHandler:this.handleClickAdd})),o.createElement(_.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(_.a,{onClick:this.handleClick,disabled:!this.state.check||this.props.disabledButton,variant:"contained",color:"secondary"},"\u30b3\u30a4\u30f3\u9001\u4fe1\uff08\u78ba\u8a8d\u30c0\u30a4\u30a2\u30ed\u30b0\u8868\u793a\uff09"))))}}]),t}(o.Component),pt=function(e){var t=e.values,n=e.className,a=e.prefix,r=e.clickHandler,s=t.map(function(e,t){return o.createElement(ht,{value:e,text:"".concat(a).concat(e),onClick:function(){return r(e)},className:n,key:"add-".concat(t,"-").concat(e)})});return o.createElement(o.Fragment,null,s)},ht=function(e){var t=e.className,n=e.text,a=e.onClick,r=e.value;return o.createElement(_.a,{onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a(r)}),variant:"contained",color:"primary",className:t},n)},mt=Object(U.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},addButton:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}})(dt),gt=n(21)("PageTransfer");gt.log=console.log.bind(console);var ft=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onHubCapsule=function(e){gt("onHubCapsule",e);var t=e.payload,a=t.event;"start"===a?gt("\u9001\u4fe1\u958b\u59cb"):"success"===a?n.onSuccessSendAsset(t.data):n.onFailureSendAsset(t.errorMessage)},n.handleClickConfirm=function(e){gt("handleClickConfirm",e);var t=e.address,a=e.qty,o=t+" \u306b "+a+" [ IBC ] \u3092\u9001\u4fe1\u3057\u307e\u3059",r={to:t,qty:a,assetName:"ibcoin",fromAddress:""+n.props.user.address};n.setState({disabledConfirm:!0,dialog:!0,dialogMessage:o,send:r,address:t,qty:a})},n.handleOnChangeAsset=function(){n.state.disabledConfirm&&(gt("handleOnChangeAsset"),n.setState({disabledConfirm:!1}))},n.closeResultDialog=function(){n.setState({resultDialog:!1})},n.handleCloseResultDialog=function(){n.closeResultDialog()},n.handleClose=function(){n.setState({disabledConfirm:!1,dialog:!1})},n.handleCancel=function(){gt("handleCancel ============= \u30ad\u30e3\u30f3\u30bb\u30eb\uff01\uff01"),n.setState({dialog:!1,dialogMessage:"",disabledConfirm:!1})},n.handleOk=function(){gt("handleOk ============= \u9001\u4fe1\uff01\uff01"),n.setState({dialog:!1,dialogMessage:"",disabledConfirm:!1}),n.state.send&&n.props.sendCoinAction(n.state.send)},n.onReceiveResult=function(e,t){if(t){var a=t.resId;a&&a.errorMessage?n.onFailureSendAsset(a.errorMessage):n.onSuccessSendAsset(t)}else n.onFailureSendAsset(e)},n.onSuccessSendAsset=function(e){n.showResultDialog("\u9001\u4fe1\u6210\u529f"),n.clearAsset()},n.onFailureSendAsset=function(e){n.showResultDialog("\u9001\u4fe1\u5931\u6557 [ ".concat(e," ]"))},n.showResultDialog=function(e){n.setState({resultDialog:!0,resultMessage:e})},n.clearAsset=function(){n.setState({address:" ",qty:0})},gt("constructor"),n.state={disabledConfirm:!1,dialog:!1,dialogMessage:"",resultDialog:!1,resultMessage:"",address:e.toAddress},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Ee.Hub.listen("sendAsset",this)}},{key:"componentWillUnmount",value:function(){Ee.Hub.remove("sendAsset",this)}},{key:"render",value:function(){gt("render");var e=this.props.user.address,t="";e&&(t=e.substr(0,Math.min(e.length,10))+".....");var n=this.state.address?this.state.address:this.props.toAddress;return o.createElement(_.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(_.h,{item:!0,xs:12},o.createElement(re,{address:t})),o.createElement(_.h,{item:!0,xs:12,style:{marginTop:"10px"}},o.createElement(_.r,{variant:"subtitle1",color:"inherit",style:{textAlign:"center"}},"\u30b3\u30a4\u30f3\u3092\u9001\u4fe1"),o.createElement(mt,{assetName:"IBC",onClick:this.handleClickConfirm,disabledButton:this.state.disabledConfirm,onChange:this.handleOnChangeAsset,address:n,qty:this.state.qty})),o.createElement(yt,{dialog:this.state.dialog,handleClose:this.handleClose,dialogMessage:this.state.dialogMessage,handleCancel:this.handleCancel,handleOk:this.handleOk}),o.createElement(bt,{resultDialog:this.state.resultDialog,handleCloseResultDialog:this.handleCloseResultDialog,resultMessage:this.state.resultMessage}))}}]),t}(o.Component),Et=function(e){return o.createElement(_.j,Object.assign({direction:"up"},e))},yt=function(e){var t=e.dialog,n=e.handleClose,a=e.dialogMessage,r=e.handleCancel,s=e.handleOk;return o.createElement(_.c,{open:t,TransitionComponent:Et,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(_.g,{id:"alert-dialog-slide-title"},"Information"),o.createElement(_.e,null,o.createElement(_.f,{id:"alert-dialog-slide-description"},a)),o.createElement(_.d,null,o.createElement(_.a,{onClick:r,color:"primary"},"Cancel"),o.createElement(_.a,{onClick:s,color:"secondary",variant:"contained"},"OK")))},bt=function(e){var t=e.resultDialog,n=e.handleCloseResultDialog,a=e.resultMessage;return o.createElement(_.c,{open:t,TransitionComponent:Et,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.createElement(_.g,{id:"alert-dialog-slide-title"},"Information"),o.createElement(_.e,null,o.createElement(_.f,{id:"alert-dialog-slide-description"},a)),o.createElement(_.d,null,o.createElement(_.a,{onClick:n,color:"primary"},"OK")))},vt=Object(lt.a)(Object(h.b)(function(e,t){return gt("mapState",e,t),{user:e.user,toAddress:t.location.state}},function(e){return{sendCoinAction:new De(e).sendAsset}})(ft)),Ct=n(21),At=Ct("IBCoupon[INFO]"),Ot=Ct("IBCoupon[ERR]"),It=function e(t){var n=this;Object(c.a)(this,e),this.dispatch=void 0,this.getPaperBalance=function(e){je.paperBalance(e).then(n.getPaperBalanceSuccess).catch(n.getPaperBalanceError)},this.getPaperBalanceSuccess=function(e){At(e),n.dispatch(P(e))},this.getPaperBalanceError=function(e){Ot(e),n.dispatch(P({address:"",code:"",qty:-1}))},this.claimPaperAsset=function(e,t){je.claimPaperAsset(e,t).then(n.claimPaperAssetSuccess).catch(n.claimPaperAssetError)},this.claimPaperAssetSuccess=function(e){At(e)},this.claimPaperAssetError=function(e){Ot(e)},this.dispatch=t},Pt=n(21)("[PAGE]{/claim}"),kt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickAdd=function(e){Pt("handleClickAdd",e),n.setQty(n.state.qty+e)},n.handleClickSet=function(e){Pt("handleClickSet",e),n.setQty(e)},n.setQty=function(e){n.setState({check:0<e,qty:Math.min(1e3,Math.max(0,e))})},n.handleClick=function(){Pt("on click claim button");var e=n.props.code,t=n.state.qty;!e||0===e.length||!t||t<=0||(Pt("onClick params",{code:e,qty:t}),n.props.paperAction(e,t))},n.handleChangeAddress=function(e){var t=e.target.value;n.setState({check:t&&0<t.length&&0<n.state.qty})},n.handleChangeQty=function(e){var t=1*e.target.value;isNaN(t)&&(t=1*n.state.qty),n.setState({check:0<t,qty:Math.min(1e3,Math.max(0,t))})},n.state={qty:0,check:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Pt("componentDidMount()"),this.props.getPaperInfo(this.props.code)}},{key:"componentWillReceiveProps",value:function(){var e=this.props.coupon;this.setState({check:!!e.address&&0<this.state.qty})}},{key:"render",value:function(){Pt("render props:",this.props);var e=this.props.classes;return o.createElement(_.h,{item:!0,xs:12},o.createElement(_.h,{item:!0,xs:12},o.createElement("form",{className:e.container,noValidate:!0,autoComplete:"off"},o.createElement(_.q,{required:!0,id:"outlined-required",label:"\u8acb\u6c42\u5148\u30a2\u30c9\u30ec\u30b9",className:e.textField,margin:"normal",variant:"outlined",fullWidth:!0,value:this.props.coupon.address,onChange:this.handleChangeAddress}),o.createElement(_.q,{id:"outlined-number",label:"IBC",value:this.state.qty,onChange:this.handleChangeQty,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",fullWidth:!0}))),o.createElement(_.h,{item:!0,xs:12},o.createElement(_.i,{style:{textAlign:"center",padding:"8px"}},o.createElement(_.a,{onClick:this.handleClick,disabled:!this.state.check,variant:"contained",color:"secondary"},"\u8acb\u6c42"))))}}]),t}(o.Component),St=Object(X.a)(Object(h.b)(function(e,t){return Pt("mapState",e,t),{code:t.match.params.code,coupon:e.coupon}},function(e){var t=new It(e);return{paperAction:t.claimPaperAsset,getPaperInfo:t.getPaperBalance}})(Object(U.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},addButton:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}})(kt))),jt=n(655),Bt=function(e){var t=e.address,n=e.qty;return o.createElement(_.l,null,o.createElement(_.m,null,o.createElement(_.o,null,o.createElement(_.n,{component:"th",scope:"row"},"Address"),o.createElement(_.n,{align:"right"},t)),o.createElement(_.o,null,o.createElement(_.n,{component:"th",scope:"row"},"Asset"),o.createElement(_.n,{align:"right"},o.createElement("div",{style:{display:"inline"}},0+n)))))},xt=n(21)("PapgePaper");xt.log=console.log.bind(console);var wt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={address:"".concat(e.user.address),qty:0,buttonText:"\u30da\u30fc\u30d1\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089\u30b3\u30a4\u30f3\u3092\u53d6\u5f97\u3059\u308b",loading:!0,redirect:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){xt("componentDidMount()"),this.props.getPaperInfo(this.props.code)}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this;if(xt("params:",this.props),!this.state.loading&&this.state.redirect)return o.createElement(E.a,{to:{pathname:"/pay"}});var t="";this.props.copuon&&this.props.copuon.address&&(t=this.props.copuon.address.substr(0,Math.min(this.state.address.length,10))+".....");var n=0;this.props.copuon&&this.props.copuon.qty&&(n=this.props.copuon.qty);var a=!(t&&0<t.length&&0<=n);return o.createElement(_.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},o.createElement(_.h,{item:!0,xs:12},o.createElement(Bt,{address:t,qty:n})),o.createElement(_.h,{item:!0,xs:12,style:{textAlign:"center",margin:"20px"}},o.createElement(_.a,{onClick:function(){e.state.res?e.setState({redirect:!0}):e.props.paperAction(e.props.code,e.state.qty)},variant:"contained",color:"primary",disabled:a},this.state.buttonText),o.createElement("br",null),o.createElement(jt.a,{to:"/share/".concat(this.props.copuon.address,"/")},o.createElement(_.a,{variant:"contained",disabled:a,style:{marginTop:"20px"}},"\u3053\u306e\u53e3\u5ea7\u306b\u30c1\u30e3\u30fc\u30b8\u3059\u308b"))))}}]),t}(o.Component),Dt=Object(h.b)(function(e,t){return xt("mapState",e,t),{user:e.user,code:t.match.params.code,copuon:e.coupon}},function(e){var t=new It(e);return{paperAction:t.claimPaperAsset,getPaperInfo:t.getPaperBalance}})(wt),Rt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:w},r.a.createElement(m.a,{history:T},r.a.createElement(_.h,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},r.a.createElement(_.b,null),r.a.createElement(L.a,null,r.a.createElement("div",{style:{height:"100%",paddingBottom:"60px"}},r.a.createElement(Q,null),r.a.createElement(g.a,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return r.a.createElement(E.a,{to:{pathname:"/pay"}})}}),r.a.createElement(f.a,{path:"/login",component:Ye}),r.a.createElement(f.a,{path:"/paper/:code?",component:Dt}),r.a.createElement(ct,{path:"/account",component:Xe}),r.a.createElement(ct,{path:"/pay",component:ue}),r.a.createElement(f.a,{path:"/claim/:code?",component:St}),r.a.createElement(ct,{path:"/transfer",component:vt}),r.a.createElement(f.a,{path:"/share/:address?",render:function(e){return r.a.createElement(E.a,{to:{pathname:"/transfer",state:e.match.params.address}})}}),r.a.createElement(f.a,{component:ne})),r.a.createElement(te,null))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Qe,null)))))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));if(window.location.hostname.indexOf("localhost")>=0){Ee.Logger.LOG_LEVEL="DEBUG",console.log("hostname = ",window.location.hostname);console.log("debug: *"),localStorage.setItem("debug","*")}ye.a.configure({aws_appsync_authenticationType:"OPENID_CONNECT",Auth:{identityPoolId:"ap-northeast-1:ef403614-ab79-48bf-b699-96430a108dc6",region:"ap-northeast-1",userPoolId:"ap-northeast-1_kxPu6h5rk",userPoolWebClientId:"14hcert5mg85d94j09e4608rof"},API:{endpoints:[{name:"IBCoin_User",endpoint:"https://dmaqop4vpl.execute-api.ap-northeast-1.amazonaws.com/test",region:"ap-northeast-1"}]}}),i.a.render(r.a.createElement(Rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[311,1,2]]]);
//# sourceMappingURL=main.5b2f28ea.chunk.js.map